const plan = {"format_version":"1.1","terraform_version":"1.3.1","variables":{"environment":{"value":"dev"},"image_defintion_name":{"value":"modules_test"},"location":{"value":"ukwest"},"project_name":{"value":"pk_project"},"source_image_offer":{"value":"0001-com-ubuntu-minimal-focal"},"source_image_publisher":{"value":"Canonical"},"source_image_sku":{"value":"minimal-20_04-lts-gen2"}},"planned_values":{"root_module":{"resources":[{"address":"azurerm_shared_image.init","mode":"managed","type":"azurerm_shared_image","name":"init","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"accelerated_network_support_enabled":null,"architecture":"x64","description":null,"disk_types_not_allowed":null,"end_of_life_date":null,"eula":null,"gallery_name":"pk_project_dev_ukw_sig","hyper_v_generation":"V2","identifier":[{"offer":"0001-com-ubuntu-minimal-focal","publisher":"Canonical-OS","sku":"modules_test"}],"location":"ukwest","max_recommended_memory_in_gb":null,"max_recommended_vcpu_count":null,"min_recommended_memory_in_gb":null,"min_recommended_vcpu_count":null,"name":"modules_test","os_type":"Linux","privacy_statement_uri":null,"purchase_plan":[],"release_note_uri":null,"resource_group_name":"pk_project-dev-ukw-sig-rg","specialized":null,"timeouts":null,"trusted_launch_enabled":null},"sensitive_values":{"identifier":[{}],"purchase_plan":[],"tags":{}}},{"address":"data.azurerm_shared_image.init","mode":"data","type":"azurerm_shared_image","name":"init","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"gallery_name":"pk_project_dev_ukw_sig","name":"modules_test","resource_group_name":"pk_project-dev-ukw-sig-rg"},"sensitive_values":{"identifier":[],"tags":{},"timeouts":{}}},{"address":"local_file.cis","mode":"managed","type":"local_file","name":"cis","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content":"- name: 'Provision Image'\n  hosts: all\n  ignore_errors: True\n  connection: local\n  become: true\n\n  roles:\n    - UBUNTU20-CIS\n\n","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"./UBUNTU20-CIS_playbook.yml","sensitive_content":null,"source":null},"sensitive_values":{}},{"address":"packer_image.build","mode":"managed","type":"packer_image","name":"build","provider_name":"registry.terraform.io/toowoxx/packer","schema_version":0,"values":{"additional_params":null,"directory":null,"environment":null,"file":"./packer/os_build.pkr.hcl","force":true,"ignore_environment":null,"name":"modules_test","triggers":{"hash":"22aaa4f6b9380f756cbb358731b186326a0b7dc9f2395358f42b756911112b57"},"variables":{"cis_playbook":"./UBUNTU20-CIS_playbook.yml","custom_version":"0.0.0","managed_image_name":"modules_test","managed_image_resource_group_name":"pk_project-dev-ukw-img-rg","pkr_rg":"pk_project-dev-ukw-pkr-rg","sig_name":"pk_project_dev_ukw_sig","sig_rg":"pk_project-dev-ukw-sig-rg","subscription":"625b66d7-5b11-40fb-99ab-ba303c13ea88","vm_size":"Standard_DS1_v2"}},"sensitive_values":{"triggers":{},"variables":{}}},{"address":"time_static.ts","mode":"managed","type":"time_static","name":"ts","provider_name":"registry.terraform.io/hashicorp/time","schema_version":0,"values":{"triggers":null},"sensitive_values":{}}]}},"resource_changes":[{"address":"azurerm_shared_image.init","mode":"managed","type":"azurerm_shared_image","name":"init","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"accelerated_network_support_enabled":null,"architecture":"x64","description":null,"disk_types_not_allowed":null,"end_of_life_date":null,"eula":null,"gallery_name":"pk_project_dev_ukw_sig","hyper_v_generation":"V2","identifier":[{"offer":"0001-com-ubuntu-minimal-focal","publisher":"Canonical-OS","sku":"modules_test"}],"location":"ukwest","max_recommended_memory_in_gb":null,"max_recommended_vcpu_count":null,"min_recommended_memory_in_gb":null,"min_recommended_vcpu_count":null,"name":"modules_test","os_type":"Linux","privacy_statement_uri":null,"purchase_plan":[],"release_note_uri":null,"resource_group_name":"pk_project-dev-ukw-sig-rg","specialized":null,"timeouts":null,"trusted_launch_enabled":null},"after_unknown":{"id":true,"identifier":[{}],"purchase_plan":[],"tags":true},"before_sensitive":false,"after_sensitive":{"identifier":[{}],"purchase_plan":[],"tags":{}}}},{"address":"data.azurerm_shared_image.init","mode":"data","type":"azurerm_shared_image","name":"init","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["read"],"before":null,"after":{"gallery_name":"pk_project_dev_ukw_sig","name":"modules_test","resource_group_name":"pk_project-dev-ukw-sig-rg"},"after_unknown":{"architecture":true,"description":true,"eula":true,"hyper_v_generation":true,"id":true,"identifier":true,"location":true,"os_type":true,"privacy_statement_uri":true,"release_note_uri":true,"specialized":true,"tags":true,"timeouts":true},"before_sensitive":false,"after_sensitive":{"identifier":[],"tags":{},"timeouts":{}}}},{"address":"local_file.cis","mode":"managed","type":"local_file","name":"cis","provider_name":"registry.terraform.io/hashicorp/local","change":{"actions":["create"],"before":null,"after":{"content":"- name: 'Provision Image'\n  hosts: all\n  ignore_errors: True\n  connection: local\n  become: true\n\n  roles:\n    - UBUNTU20-CIS\n\n","content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"./UBUNTU20-CIS_playbook.yml","sensitive_content":null,"source":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{"sensitive_content":true}}},{"address":"packer_image.build","mode":"managed","type":"packer_image","name":"build","provider_name":"registry.terraform.io/toowoxx/packer","change":{"actions":["create"],"before":null,"after":{"additional_params":null,"directory":null,"environment":null,"file":"./packer/os_build.pkr.hcl","force":true,"ignore_environment":null,"name":"modules_test","triggers":{"hash":"22aaa4f6b9380f756cbb358731b186326a0b7dc9f2395358f42b756911112b57"},"variables":{"cis_playbook":"./UBUNTU20-CIS_playbook.yml","custom_version":"0.0.0","managed_image_name":"modules_test","managed_image_resource_group_name":"pk_project-dev-ukw-img-rg","pkr_rg":"pk_project-dev-ukw-pkr-rg","sig_name":"pk_project_dev_ukw_sig","sig_rg":"pk_project-dev-ukw-sig-rg","subscription":"625b66d7-5b11-40fb-99ab-ba303c13ea88","vm_size":"Standard_DS1_v2"}},"after_unknown":{"build_uuid":true,"id":true,"triggers":{"update_base":true},"variables":{"cis_role":true,"cis_url":true,"image_offer":true,"image_publisher":true,"image_sku":true,"os_type":true}},"before_sensitive":false,"after_sensitive":{"triggers":{},"variables":{}}}},{"address":"time_static.ts","mode":"managed","type":"time_static","name":"ts","provider_name":"registry.terraform.io/hashicorp/time","change":{"actions":["create"],"before":null,"after":{"triggers":null},"after_unknown":{"day":true,"hour":true,"id":true,"minute":true,"month":true,"rfc3339":true,"second":true,"unix":true,"year":true},"before_sensitive":false,"after_sensitive":{}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.3.1","values":{"root_module":{"resources":[{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"04b07795-8ddb-461a-bbee-02f9e1bf7b46","id":"Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9ZjFiMDAxMTQtM2U5Yi00NWM4LWJjMTgtYjU0OWZhMDQxMTQzO3N1YnNjcmlwdGlvbklkPTYyNWI2NmQ3LTViMTEtNDBmYi05OWFiLWJhMzAzYzEzZWE4ODt0ZW5hbnRJZD01MzhjZjZmZC1mNWQ0LTQ0NTEtOGU0YS04OGMzNGYyZjI2MTk=","object_id":"f1b00114-3e9b-45c8-bc18-b549fa041143","subscription_id":"625b66d7-5b11-40fb-99ab-ba303c13ea88","tenant_id":"538cf6fd-f5d4-4451-8e4a-88c34f2f2619","timeouts":null},"sensitive_values":{}},{"address":"data.azurerm_resource_group.build_resource_group","mode":"data","type":"azurerm_resource_group","name":"build_resource_group","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"/subscriptions/625b66d7-5b11-40fb-99ab-ba303c13ea88/resourceGroups/pk_project-dev-ukw-pkr-rg","location":"ukwest","name":"pk_project-dev-ukw-pkr-rg","tags":{},"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_resource_group.managed_image_resource_group","mode":"data","type":"azurerm_resource_group","name":"managed_image_resource_group","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"/subscriptions/625b66d7-5b11-40fb-99ab-ba303c13ea88/resourceGroups/pk_project-dev-ukw-img-rg","location":"ukwest","name":"pk_project-dev-ukw-img-rg","tags":{},"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_resource_group.shared_image_gallery","mode":"data","type":"azurerm_resource_group","name":"shared_image_gallery","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"/subscriptions/625b66d7-5b11-40fb-99ab-ba303c13ea88/resourceGroups/pk_project-dev-ukw-sig-rg","location":"ukwest","name":"pk_project-dev-ukw-sig-rg","tags":{},"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_shared_image_gallery.shared_image_gallery","mode":"data","type":"azurerm_shared_image_gallery","name":"shared_image_gallery","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"description":"Shared Images Gallery to store VMSS deployment images","id":"/subscriptions/625b66d7-5b11-40fb-99ab-ba303c13ea88/resourceGroups/pk_project-dev-ukw-sig-rg/providers/Microsoft.Compute/galleries/pk_project_dev_ukw_sig","location":"ukwest","name":"pk_project_dev_ukw_sig","resource_group_name":"pk_project-dev-ukw-sig-rg","tags":{},"timeouts":null,"unique_name":"625b66d7-5b11-40fb-99ab-ba303c13ea88-PK_PROJECT_DEV_UKW_SIG"},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_shared_image_gallery.sig","mode":"data","type":"azurerm_shared_image_gallery","name":"sig","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"description":"Shared Images Gallery to store VMSS deployment images","id":"/subscriptions/625b66d7-5b11-40fb-99ab-ba303c13ea88/resourceGroups/pk_project-dev-ukw-sig-rg/providers/Microsoft.Compute/galleries/pk_project_dev_ukw_sig","location":"ukwest","name":"pk_project_dev_ukw_sig","resource_group_name":"pk_project-dev-ukw-sig-rg","tags":{},"timeouts":null,"unique_name":"625b66d7-5b11-40fb-99ab-ba303c13ea88-PK_PROJECT_DEV_UKW_SIG"},"sensitive_values":{"tags":{}}},{"address":"data.packer_files.build","mode":"data","type":"packer_files","name":"build","provider_name":"registry.terraform.io/toowoxx/packer","schema_version":0,"values":{"directory":"./packer","file":null,"file_dependencies":null,"files_hash":"22aaa4f6b9380f756cbb358731b186326a0b7dc9f2395358f42b756911112b57"},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","expressions":{"features":[{}]}},"local":{"name":"local"},"packer":{"name":"packer"},"time":{"name":"time"}},"root_module":{"resources":[{"address":"azurerm_shared_image.init","mode":"managed","type":"azurerm_shared_image","name":"init","provider_config_key":"azurerm","expressions":{"gallery_name":{"references":["data.azurerm_shared_image_gallery.shared_image_gallery.name","data.azurerm_shared_image_gallery.shared_image_gallery"]},"hyper_v_generation":{"references":["local.hyper_v_generation"]},"identifier":[{"offer":{"references":["var.source_image_offer"]},"publisher":{"references":["var.source_image_publisher"]},"sku":{"references":["var.image_defintion_name"]}}],"location":{"references":["data.azurerm_shared_image_gallery.shared_image_gallery.location","data.azurerm_shared_image_gallery.shared_image_gallery"]},"name":{"references":["var.image_defintion_name"]},"os_type":{"references":["local.os_type"]},"resource_group_name":{"references":["data.azurerm_shared_image_gallery.shared_image_gallery.resource_group_name","data.azurerm_shared_image_gallery.shared_image_gallery"]},"tags":{"references":["var.source_image_publisher","var.source_image_offer","var.source_image_sku","local.os_type","local.hyper_v_generation","time_static.ts.unix","time_static.ts","local.source_image_os_codename","local.cis_role","local.cis_url"]}},"schema_version":0},{"address":"local_file.cis","mode":"managed","type":"local_file","name":"cis","provider_config_key":"local","expressions":{"content":{"references":["local.cis_role"]},"filename":{"references":["path.module","local.cis_role"]}},"schema_version":0},{"address":"packer_image.build","mode":"managed","type":"packer_image","name":"build","provider_config_key":"packer","expressions":{"file":{"references":["path.module"]},"force":{"constant_value":true},"name":{"references":["var.image_defintion_name"]},"triggers":{"references":["data.azurerm_shared_image.init.tags.update_required","data.azurerm_shared_image.init.tags","data.azurerm_shared_image.init","data.packer_files.build.files_hash","data.packer_files.build"]},"variables":{"references":["var.image_defintion_name","data.azurerm_resource_group.managed_image_resource_group.name","data.azurerm_resource_group.managed_image_resource_group","data.azurerm_shared_image.init.tags.source_image_publisher","data.azurerm_shared_image.init.tags","data.azurerm_shared_image.init","data.azurerm_shared_image.init.tags.source_image_offer","data.azurerm_shared_image.init.tags","data.azurerm_shared_image.init","data.azurerm_shared_image.init.tags.source_image_sku","data.azurerm_shared_image.init.tags","data.azurerm_shared_image.init","data.azurerm_shared_image.init.tags.source_image_os","data.azurerm_shared_image.init.tags","data.azurerm_shared_image.init","data.azurerm_client_config.current.subscription_id","data.azurerm_client_config.current","data.azurerm_resource_group.shared_image_gallery.name","data.azurerm_resource_group.shared_image_gallery","data.azurerm_resource_group.build_resource_group.name","data.azurerm_resource_group.build_resource_group","data.azurerm_shared_image_gallery.shared_image_gallery.name","data.azurerm_shared_image_gallery.shared_image_gallery","data.azurerm_shared_image.init.tags.source_os_cis_url","data.azurerm_shared_image.init.tags","data.azurerm_shared_image.init","data.azurerm_shared_image.init.tags.source_os_cis_role","data.azurerm_shared_image.init.tags","data.azurerm_shared_image.init","local_file.cis.filename","local_file.cis"]}},"schema_version":0,"depends_on":["azurerm_shared_image.init"]},{"address":"time_static.ts","mode":"managed","type":"time_static","name":"ts","provider_config_key":"time","schema_version":0},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0},{"address":"data.azurerm_resource_group.build_resource_group","mode":"data","type":"azurerm_resource_group","name":"build_resource_group","provider_config_key":"azurerm","expressions":{"name":{"references":["local.sig_rg"]}},"schema_version":0},{"address":"data.azurerm_resource_group.managed_image_resource_group","mode":"data","type":"azurerm_resource_group","name":"managed_image_resource_group","provider_config_key":"azurerm","expressions":{"name":{"references":["local.sig_rg"]}},"schema_version":0},{"address":"data.azurerm_resource_group.shared_image_gallery","mode":"data","type":"azurerm_resource_group","name":"shared_image_gallery","provider_config_key":"azurerm","expressions":{"name":{"references":["local.sig_rg"]}},"schema_version":0},{"address":"data.azurerm_shared_image.init","mode":"data","type":"azurerm_shared_image","name":"init","provider_config_key":"azurerm","expressions":{"gallery_name":{"references":["data.azurerm_shared_image_gallery.shared_image_gallery.name","data.azurerm_shared_image_gallery.shared_image_gallery"]},"name":{"references":["var.image_defintion_name"]},"resource_group_name":{"references":["data.azurerm_shared_image_gallery.shared_image_gallery.resource_group_name","data.azurerm_shared_image_gallery.shared_image_gallery"]}},"schema_version":0,"depends_on":["azurerm_shared_image.init"]},{"address":"data.azurerm_shared_image_gallery.shared_image_gallery","mode":"data","type":"azurerm_shared_image_gallery","name":"shared_image_gallery","provider_config_key":"azurerm","expressions":{"name":{"references":["local.sig_name"]},"resource_group_name":{"references":["data.azurerm_resource_group.shared_image_gallery.name","data.azurerm_resource_group.shared_image_gallery"]}},"schema_version":0},{"address":"data.azurerm_shared_image_gallery.sig","mode":"data","type":"azurerm_shared_image_gallery","name":"sig","provider_config_key":"azurerm","expressions":{"name":{"references":["local.sig_name"]},"resource_group_name":{"references":["local.sig_rg"]}},"schema_version":0},{"address":"data.packer_files.build","mode":"data","type":"packer_files","name":"build","provider_config_key":"packer","expressions":{"directory":{"references":["path.module"]}},"schema_version":0}],"variables":{"environment":{"default":"dev","description":"The terraform workspace environment."},"image_defintion_name":{"default":"modules_test","description":"A manually selected image definition name that must be unique in the gallery."},"location":{"default":"ukwest","description":"The location for deployment of the project."},"project_name":{"default":"pk_project","description":"The forked project name."},"source_image_offer":{"default":"0001-com-ubuntu-minimal-focal","description":"The offer available under the selected publisher for the AZ Base image."},"source_image_publisher":{"default":"Canonical","description":"The Publisher in AZ of the required base image."},"source_image_sku":{"default":"minimal-20_04-lts-gen2","description":"the SKU (Gen Specific) of the required base OS."}}}}}